{% extends 'base.html.twig' %}

{% block title %}List of read books ðŸ“š{% endblock %}

{% block body %}
    <table>
        <tr>
            <td class="title">
                title
            </td>
            <td class="author">
                author
                {% if filter.author is defined %} <a href="?action=list">Ã—</a> {% endif %}
            </td>
            <td class="type">
                type
                {% if filter.type is defined %} <a href="?action=list">Ã—</a> {% endif %}
            </td>
            <td class="note">
                note
                {% if filter.note is defined %} <a href="?action=list">Ã—</a> {% endif %}
            </td>
            <td class="finished">
                finished on
            </td>
        </tr>

        {% if authenticated %}
            {% include 'new.html.twig' %}
        {% endif %}

        {% for book in books %}
            <tr class="{{ book.finished_at ? 'done' : (book.abandonned_at ? 'abandonned' : 'reading') }}">
                <td>
                    <a href="?slug={{ book.slug }}&action={{ authenticated ? 'edit' : 'show' }}"
                       class="list__book-title"><strong>{{ book.title }}</strong></a>
                </td>

                <td>
                    <a href="?filter[author]={{ book.author }}" class="list__filter-link list__authors-name">
                        <strong>{{ book.author_name ?? book.author }}</strong>
                    </a>
                </td>

                <td>
                    <a href="?filter[type]={{ book.type }}" class="list__filter-link">
                        <span class="badge {{ book.type }}">{{ book.type }}</span>
                    </a>
                </td>
                <td>
                    <a href="?filter[note]={{ book.note_id }}" class="list__filter-link">
                        <span class="badge note_{{ book.note_id }}">{{ book.note }}</span>
                    </a>
                </td>
                <td>
                    {{ book.finished_at
                    ? book.finished_at|date('Yâ‹…mâ‹…d')
                    :  (book.abandonned_at ? 'abandonned' : 'currently reading')
                    }}</td>
            </tr>
        {% endfor %}
    </table>

{% endblock %}
